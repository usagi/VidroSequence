【VDRM形式について(2008-04-18 ver.0.2.0)】

●VDRM形式とは？

　VidroSequenceはvidroに対して多数のシーンファイルを連続で自動的にレンダリングさせる事を目的としています。しかし、連番のMQO形式ファイルをただ放り込むだけではvidroの真価は発揮できません。vidroは独自のシーン記述ファイルとしてvdr形式を用いる事で本来の性能を発揮できます。しかし、オブジェクトの数だけシーンファイルを書くのは面倒です。そんなわけでVDR形式のシーンファイルを1つだけ作っておき、オブジェクト部分を連番のオブジェクトファイル名に置換したシーンファイルを自動的に生成してレンダリング出来たらとりあえず解決します。そんなわけでVDR形式のコメント部分を使って少々拡張したのがVDRM形式です。

●VDRM形式の仕様

　コメント行に以下の形式でVDRM用の情報を加える。同梱のsample.vdrmを参照。

○連番の最初と最後と桁の指定

#@VDRM_RANGE		000			099

　桁は最初と最後の値を指定する表記が同じ桁数ならその桁数が採用される。最初と最後が異なる桁数で指定されていた場合は桁合わせは行われずに、例えば0,1,2,3,4...25,26,27...99,100,101...の様に番号文字列が生成される。

○置換対象名とプリフィックスとサフィックスの指定

#@VDRM_OBJECTS_BEGIN
#	OBJ00	hoge_A_		.mqo
#	OBJ03	hoge_B_		.mqo
#	HOGE7	hoge_C_		.mqo
#@VDRM_OBJECTS_END

　上記の例では実際にレンダリングされるシーンファイルでは<OBJ00>,<OBJ03>,<HOGE7>という3つの文字列が、hoge_A_000.mqo,hoge_B_000.mqo,hoge_C_000.mqoなどに置換される。シーンファイル自体で連番置換したい部分は<OBJ00>の様に'<'と'>'で囲んでおく。

●VidroSequenceにおけるVDRM形式の動作

　拡張子が".vdrm"のファイルをVDRM形式として取り扱います。"/run"ボタンを押すとVDRMファイルに従って連番のVDRファイルが自動的に生成され、vidroに連続で描画して貰います。なお、自動生成される連番のシーンファイルにはVDRMにあった全ての空行とコメント行は除去されます。(VDRMファイル本体が変更される事はない。)

　おまけ機能的にVidroSequenceの実行時に第一引数としてVDRMファイルを指定する場合に第二引数に/runが指定されていた場合に起動と同時にVDRMの処理を開始したりもします。
